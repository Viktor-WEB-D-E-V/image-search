{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/js/utils/refs.js","../src/js/utils/queryParams.js","../src/js/utils/scrollBy.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '22970342-054b8243005dd74f99097cd8f';\nconst BASIC_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function getPixabayImages(query, page = 1) {\n  try {\n    const response = await axios.get(BASIC_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: PER_PAGE,\n        page: page,\n      },\n    });\n    return {\n      images: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw new Error('Failed to fetch images. Please try again later.');\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderGalleryCard(element, images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n            />\n            <ul class=\"gallery-info\">\n              <li class=\"gallery-info-item\">Likes <span class=\"descr-span\">${likes}</span></li>\n              <li class=\"gallery-info-item\">Views <span class=\"descr-span\">${views}</span></li>\n              <li class=\"gallery-info-item\">Comments <span class=\"descr-span\">${comments}</span></li>\n              <li class=\"gallery-info-item\">Downloads <span class=\"descr-span\">${downloads}</span></li>\n            </ul> \n          </a>\n        </li>   \n      `;\n      }\n    )\n    .join('');\n\n  element.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery-item a', {\n    captionDelay: 250,\n    scrollZoom: false,\n  });\n  lightbox.refresh();\n}\n\nexport function clearGallery(element) {\n  element.innerHTML = '';\n}\n\nexport function showLoader(element) {\n  element.classList.remove('hidden');\n}\n\nexport function hideLoader(element) {\n  element.classList.add('hidden');\n}\n\nexport function showLoadMore(element) {\n  element.style.display = 'block';\n}\n\nexport function hideLoadMore(element) {\n  element.style.display = 'none';\n}\n\nexport function showNotification(message, type) {\n  iziToast[type]({\n    title: type.toUpperCase(),\n    message,\n    position: 'bottomRight',\n  });\n}\n","const refs = {\n  form: document.querySelector('.form'),\n  loader: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nexport default refs;\n","const queryParams = {\n  query: '',\n  page: 0,\n  totalPage: 0,\n};\n\nexport default queryParams;\n","function scrollBy() {\n  window.scrollBy({\n    top:\n      2 *\n      document.querySelector('.gallery-item').getBoundingClientRect().height,\n    behavior: 'smooth',\n  });\n}\nexport default scrollBy;\n","import { getPixabayImages } from './js/pixabay-api';\nimport {\n  renderGalleryCard,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMore,\n  hideLoadMore,\n  showNotification,\n} from './js/render-function';\n\nimport refs from './js/utils/refs';\nimport queryParams from './js/utils/queryParams';\nimport scrollBy from './js/utils/scrollBy';\n\nrefs.form.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  queryParams.query = form.elements.search_text.value.trim();\n\n  if (!queryParams.query) {\n    showNotification('Please enter a value', 'warning');\n    return;\n  }\n\n  queryParams.page = 1;\n\n  clearGallery(refs.gallery);\n  showLoader(refs.loader);\n  hideLoadMore(refs.loadMoreBtn);\n\n  try {\n    const { images, totalHits } = await getPixabayImages(\n      queryParams.query,\n      queryParams.page\n    );\n    queryParams.totalPage = Math.ceil(totalHits / 15);\n\n    if (images.length === 0) {\n      showNotification(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'info'\n      );\n    } else {\n      renderGalleryCard(refs.gallery, images);\n\n      if (queryParams.page < queryParams.totalPage) {\n        showLoadMore(refs.loadMoreBtn);\n      }\n    }\n  } catch (error) {\n    showNotification(\n      'Failed to fetch images. Please try again later.',\n      'error'\n    );\n  } finally {\n    hideLoader(refs.loader);\n  }\n}\nasync function onLoadMore() {\n  queryParams.page += 1;\n\n  showLoader(refs.loader);\n  showLoadMore(refs.loadMoreBtn);\n\n  try {\n    const { images } = await getPixabayImages(\n      queryParams.query,\n      queryParams.page\n    );\n\n    renderGalleryCard(refs.gallery, images);\n    scrollBy();\n    if (queryParams.page >= queryParams.totalPage) {\n      showNotification('No more images to load.', 'warning');\n      hideLoadMore(refs.loadMoreBtn);\n    }\n  } catch (error) {\n    showNotification(\n      'Failed to fetch images. Please try again later.',\n      'error'\n    );\n  } finally {\n    hideLoader(refs.loader);\n  }\n}\n"],"names":["API_KEY","BASIC_URL","PER_PAGE","getPixabayImages","query","page","response","axios","error","renderGalleryCard","element","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMore","hideLoadMore","showNotification","message","type","iziToast","refs","queryParams","scrollBy","onSearch","onLoadMore","form","totalHits"],"mappings":"owBACA,MAAMA,EAAU,qCACVC,EAAY,2BACZC,EAAW,GAEV,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CACtD,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIN,EAAW,CAC1C,OAAQ,CACN,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAMG,CACP,CACP,CAAK,EACD,MAAO,CACL,OAAQC,EAAS,KAAK,KACtB,UAAWA,EAAS,KAAK,SAC1B,CACF,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvC,IAAI,MAAM,iDAAiD,CACrE,CACA,CCpBO,SAASC,EAAkBC,EAASC,EAAQ,CACjD,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,0CAE2BL,CAAa;AAAA;AAAA;AAAA,qBAGlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA,6EAGoDC,CAAK;AAAA,6EACLC,CAAK;AAAA,gFACFC,CAAQ;AAAA,iFACPC,CAAS;AAAA;AAAA;AAAA;AAAA,OAM1F,EACK,KAAK,EAAE,EAEVT,EAAQ,mBAAmB,YAAaE,CAAM,EAE7B,IAAIQ,EAAe,kBAAmB,CACrD,aAAc,IACd,WAAY,EAChB,CAAG,EACQ,QAAS,CACpB,CAEO,SAASC,EAAaX,EAAS,CACpCA,EAAQ,UAAY,EACtB,CAEO,SAASY,EAAWZ,EAAS,CAClCA,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAEO,SAASa,EAAWb,EAAS,CAClCA,EAAQ,UAAU,IAAI,QAAQ,CAChC,CAEO,SAASc,EAAad,EAAS,CACpCA,EAAQ,MAAM,QAAU,OAC1B,CAEO,SAASe,EAAaf,EAAS,CACpCA,EAAQ,MAAM,QAAU,MAC1B,CAEO,SAASgB,EAAiBC,EAASC,EAAM,CAC9CC,EAASD,CAAI,EAAE,CACb,MAAOA,EAAK,YAAa,EACzB,QAAAD,EACA,SAAU,aACd,CAAG,CACH,CC1EA,MAAMG,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,CAClD,ECLMC,EAAc,CAClB,MAAO,GACP,KAAM,EACN,UAAW,CACb,ECJA,SAASC,GAAW,CAClB,OAAO,SAAS,CACd,IACE,EACA,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAClE,SAAU,QACd,CAAG,CACH,CCQAF,EAAK,KAAK,iBAAiB,SAAUG,CAAQ,EAC7CH,EAAK,YAAY,iBAAiB,QAASI,CAAU,EAErD,eAAeD,EAAS,EAAG,CACzB,EAAE,eAAgB,EAElB,MAAME,EAAO,EAAE,cAGf,GAFAJ,EAAY,MAAQI,EAAK,SAAS,YAAY,MAAM,KAAM,EAEtD,CAACJ,EAAY,MAAO,CACtBL,EAAiB,uBAAwB,SAAS,EAClD,MACJ,CAEEK,EAAY,KAAO,EAEnBV,EAAaS,EAAK,OAAO,EACzBR,EAAWQ,EAAK,MAAM,EACtBL,EAAaK,EAAK,WAAW,EAE7B,GAAI,CACF,KAAM,CAAE,OAAAnB,EAAQ,UAAAyB,CAAW,EAAG,MAAMjC,EAClC4B,EAAY,MACZA,EAAY,IACb,EACDA,EAAY,UAAY,KAAK,KAAKK,EAAY,EAAE,EAE5CzB,EAAO,SAAW,EACpBe,EACE,2EACA,MACD,GAEDjB,EAAkBqB,EAAK,QAASnB,CAAM,EAElCoB,EAAY,KAAOA,EAAY,WACjCP,EAAaM,EAAK,WAAW,EAGlC,MAAe,CACdJ,EACE,kDACA,OACD,CACL,QAAY,CACRH,EAAWO,EAAK,MAAM,CAC1B,CACA,CACA,eAAeI,GAAa,CAC1BH,EAAY,MAAQ,EAEpBT,EAAWQ,EAAK,MAAM,EACtBN,EAAaM,EAAK,WAAW,EAE7B,GAAI,CACF,KAAM,CAAE,OAAAnB,CAAQ,EAAG,MAAMR,EACvB4B,EAAY,MACZA,EAAY,IACb,EAEDtB,EAAkBqB,EAAK,QAASnB,CAAM,EACtCqB,EAAU,EACND,EAAY,MAAQA,EAAY,YAClCL,EAAiB,0BAA2B,SAAS,EACrDD,EAAaK,EAAK,WAAW,EAEhC,MAAe,CACdJ,EACE,kDACA,OACD,CACL,QAAY,CACRH,EAAWO,EAAK,MAAM,CAC1B,CACA"}