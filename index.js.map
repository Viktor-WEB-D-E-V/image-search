{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/js/utils/refs.js","../src/js/utils/queryParams.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '22970342-054b8243005dd74f99097cd8f';\nconst BASIC_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function getPixabayImages(query, page = 1) {\n  try {\n    const response = await axios.get(BASIC_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: PER_PAGE,\n        page: page,\n      },\n    });\n\n    return {\n      images: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw new Error('Failed to fetch images. Please try again later.');\n  }\n\n  // axios\n  //   .get(\n  //     `${BASIC_URL}?key=${API_KEY}&q=${value}&image_type=photo&orientation=horizontal&safesearch=true`\n  //   )\n  //   .then(response => response.data)\n  //   .catch(error => {\n  //     console.error('Error fetching images:', error);\n  //     throw error;\n  //   });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGalleryCard(element, images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n            />\n            <ul class=\"gallery-info\">\n              <li class=\"gallery-info-item\">Likes <span class=\"descr-span\">${likes}</span></li>\n              <li class=\"gallery-info-item\">Views <span class=\"descr-span\">${views}</span></li>\n              <li class=\"gallery-info-item\">Comments <span class=\"descr-span\">${comments}</span></li>\n              <li class=\"gallery-info-item\">Downloads <span class=\"descr-span\">${downloads}</span></li>\n            </ul> \n          </a>\n        </li>   \n      `;\n      }\n    )\n    .join('');\n\n  console.log(markup);\n  element.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery-item a', {\n    captionDelay: 250,\n    scrollZoom: false,\n  });\n  lightbox.refresh();\n}\n\nexport function clearGallery(element) {\n  element.innerHTML = '';\n}\n\nexport function showLoader(element) {\n  element.classList.remove('hidden');\n}\n\nexport function hideLoader(element) {\n  element.classList.add('hidden');\n}\n\nexport function showLoadMore(element) {\n  element.style.display = 'block';\n}\n\nexport function hideLoadMore(element) {\n  element.style.display = 'none';\n}\n","const refs = {\n  form: document.querySelector('.form'),\n  loader: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nexport default refs;\n","const queryParams = {\n  query: '',\n  page: 0,\n  totalPage: 0,\n};\n\nexport default queryParams;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPixabayImages } from './js/pixabay-api';\nimport {\n  renderGalleryCard,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMore,\n  hideLoadMore,\n} from './js/render-function';\n\nimport refs from './js/utils/refs';\nimport queryParams from './js/utils/queryParams';\n\nrefs.form.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(e) {\n  e.preventDefault();\n\n  const form = e.currentTarget;\n  queryParams.query = form.elements.search_text.value.trim();\n\n  if (!queryParams.query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a value',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  queryParams.page = 1;\n\n  clearGallery(refs.gallery);\n  showLoader(refs.loader);\n  hideLoadMore(refs.loadMoreBtn);\n\n  try {\n    const { images, totalHits } = await getPixabayImages(\n      queryParams.query,\n      queryParams.page\n    );\n    queryParams.totalPage = Math.ceil(totalHits / 15);\n\n    if (images.length === 0) {\n      iziToast.info({\n        title: 'No Results',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n     renderGalleryCard(refs.gallery, images);\n\n      if (queryParams.page < queryParams.totalPage) {\n        showLoadMore(refs.loadMoreBtn);\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader(refs.loader);\n  }\n}\nasync function onLoadMore() {\n  queryParams.page += 1;\n\n  showLoader(refs.loader);\n  showLoadMore(refs.loadMoreBtn);\n\n  try {\n    const { images } = await getPixabayImages(\n      queryParams.query,\n      queryParams.page\n    );\n\n    renderGalleryCard(refs.gallery, images);\n\n    if (queryParams.page >= queryParams.totalPage) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'No more images to load.',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader(refs.loader);\n  }\n}\n"],"names":["API_KEY","BASIC_URL","PER_PAGE","getPixabayImages","query","page","response","axios","error","renderGalleryCard","element","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMore","hideLoadMore","refs","queryParams","onSearch","onLoadMore","form","iziToast","totalHits"],"mappings":"owBACA,MAAMA,EAAU,qCACVC,EAAY,2BACZC,EAAW,GAEV,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CACtD,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIN,EAAW,CAC1C,OAAQ,CACN,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAMG,CACP,CACP,CAAK,EAED,MAAO,CACL,OAAQC,EAAS,KAAK,KACtB,UAAWA,EAAS,KAAK,SAC1B,CACF,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvC,IAAI,MAAM,iDAAiD,CACrE,CAWA,CClCO,SAASC,EAAkBC,EAASC,EAAQ,CACjD,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,0CAE2BL,CAAa;AAAA;AAAA;AAAA,qBAGlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA,6EAGoDC,CAAK;AAAA,6EACLC,CAAK;AAAA,gFACFC,CAAQ;AAAA,iFACPC,CAAS;AAAA;AAAA;AAAA;AAAA,OAM1F,EACK,KAAK,EAAE,EAEV,QAAQ,IAAIP,CAAM,EAClBF,EAAQ,mBAAmB,YAAaE,CAAM,EAE7B,IAAIQ,EAAe,kBAAmB,CACrD,aAAc,IACd,WAAY,EAChB,CAAG,EACQ,QAAS,CACpB,CAEO,SAASC,EAAaX,EAAS,CACpCA,EAAQ,UAAY,EACtB,CAEO,SAASY,EAAWZ,EAAS,CAClCA,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAEO,SAASa,EAAWb,EAAS,CAClCA,EAAQ,UAAU,IAAI,QAAQ,CAChC,CAEO,SAASc,EAAad,EAAS,CACpCA,EAAQ,MAAM,QAAU,OAC1B,CAEO,SAASe,EAAaf,EAAS,CACpCA,EAAQ,MAAM,QAAU,MAC1B,CChEA,MAAMgB,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,CAClD,ECLMC,EAAc,CAClB,MAAO,GACP,KAAM,EACN,UAAW,CACb,ECYAD,EAAK,KAAK,iBAAiB,SAAUE,CAAQ,EAC7CF,EAAK,YAAY,iBAAiB,QAASG,CAAU,EAErD,eAAeD,EAAS,EAAG,CACzB,EAAE,eAAgB,EAElB,MAAME,EAAO,EAAE,cAGf,GAFAH,EAAY,MAAQG,EAAK,SAAS,YAAY,MAAM,KAAM,EAEtD,CAACH,EAAY,MAAO,CACtBI,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,uBACT,SAAU,UAChB,CAAK,EACD,MACJ,CAEEJ,EAAY,KAAO,EAEnBN,EAAaK,EAAK,OAAO,EACzBJ,EAAWI,EAAK,MAAM,EACtBD,EAAaC,EAAK,WAAW,EAE7B,GAAI,CACF,KAAM,CAAE,OAAAf,EAAQ,UAAAqB,CAAW,EAAG,MAAM7B,EAClCwB,EAAY,MACZA,EAAY,IACb,EACDA,EAAY,UAAY,KAAK,KAAKK,EAAY,EAAE,EAE5CrB,EAAO,SAAW,EACpBoB,EAAS,KAAK,CACZ,MAAO,aACP,QACE,2EACF,SAAU,UAClB,CAAO,GAEFtB,EAAkBiB,EAAK,QAASf,CAAM,EAEjCgB,EAAY,KAAOA,EAAY,WACjCH,EAAaE,EAAK,WAAW,EAGlC,MAAe,CACdK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kDACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRR,EAAWG,EAAK,MAAM,CAC1B,CACA,CACA,eAAeG,GAAa,CAC1BF,EAAY,MAAQ,EAEpBL,EAAWI,EAAK,MAAM,EACtBF,EAAaE,EAAK,WAAW,EAE7B,GAAI,CACF,KAAM,CAAE,OAAAf,CAAQ,EAAG,MAAMR,EACvBwB,EAAY,MACZA,EAAY,IACb,EAEDlB,EAAkBiB,EAAK,QAASf,CAAM,EAElCgB,EAAY,MAAQA,EAAY,WAClCI,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,0BACT,SAAU,UAClB,CAAO,CAEJ,MAAe,CACdA,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kDACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRR,EAAWG,EAAK,MAAM,CAC1B,CACA"}